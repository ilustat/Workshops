Wpopn <- read_csv(WpopCSV)
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
View(Wpopn)
knitr::opts_chunk$set(echo = TRUE,
dev = "png",
fig.ext = ".png")
# Loding the tidyverse packages
library(tidyverse)
# We must load the tidyverse package first
library(tidyverse)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
glimpse(Wpopn)
View(Wpopn)
PopnMFeg <- read_rds("popnMF.rds")
PopnMFeg <- read_rds("popnMF_eg.rds")
View(PopnMFeg)
View(PopnMFeg)
glimpse(PopnM_Feg)
glimpse(PopnMF_eg)
PopnMF_eg <- read_rds("popnMF_eg.rds")
glimpse(PopnMF_eg)
PopnMF <- Wpopn %>%
gather(key = SexYear, value = Popn)
PopnMF <- Wpopn %>%
gather(key = Country, value = Popn)
PopnMF <- Wpopn %>%
gather(key = Country, value = Popn, -SexYear)
View(PopnMF)
PopnMF <- Wpopn %>%
gather(key = SexYear, value = Country, )
PopnMF <- Wpopn %>%
gather(key = SexYear, value = Country, -Country )
PopnMF <- Wpopn %>%
gather(key = SexYear, value = Country )
PopnMF <- Wpopn %>%
gather(key = Country, value = SexYear )
PopnMF <- Wpopn %>%
gather(key = Country, value = SexYear, -Country )
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = Country, -Country )
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country )
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(1,1))
library(stringr)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(1,1))
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1))
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, 2)))
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, -1)))
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, end=-1)))
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5)))
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
spread(key = Sex, value = Popn)
View(PopnMF)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
arrange(Country, Year)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
arrange(Country, Year)
#--# Fill in all the functions below
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
arrange(Country, Year)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
#--# Fill in all the functions below
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
arrange(Country, Year)
View(PopnMF)
knitr::opts_chunk$set(echo = TRUE,
dev = "png",
fig.ext = ".png")
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
#          mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
arrange(Country, Year)
# Loding the tidyverse packages
library(tidyverse)
# We also need package stringr later
library(stringr)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
#--# Fill in all the functions below
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
#          mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
arrange(Country, Year)
PopnMF$Year
distinct(PopnMF$Year)
distinct(PopnMF, Year)
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PropnM))
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM))
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM))
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
arrange(PropF, Country, Year) %>%
head(10)
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
arrange(PropF, Country, Year) %>%
head(10) %>%
print
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
arrange(PropF, Country, Year) %>%
tail(10) %>%
print
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
filter(is.na(PopnF) & is.na(PopnM)) %>%
arrange(Country, Year)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
filter(!is.na(PopnF) & !is.na(PopnM)) %>%
arrange(Country, Year)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
#          filter(!is.na(PopnF) & !is.na(PopnM)) %>%
arrange(Country, Year)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = F) %>%
rename(PopnM = M) %>%
filter(!is.na(PopnF) & !is.na(PopnM)) %>%
arrange(Country, Year)
Year_Lowest_F <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
arrange(PropF, Country, Year) %>%
tail(10) %>%
print
PopnMF %>% filter(Country == "Portugal") %>%
gather(key = "Sex", value = "Popn", -PropF, -PropM)
PopnMF_popn <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM = 1 - PropF     ) %>%
arrange(PropF, Country, Year)
PopnMF_prop <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM = 1 - PropF     ) %>%
arrange(PropF, Country, Year)
PopnMF_prop %>%  head(10) %>%
print
# Solution given
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM =   ) %>%
arrange(PropF, Country, Year)
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM = 1 PropF  ) %>%
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM = 1 -PropF  ) %>%
arrange(PropF, Country, Year)
# Solution given
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM = 1 -PropF  ) %>%
arrange(PropF, Country, Year)
# Printing the first 10 observations.
Popn_all %>%  head(10) %>%  print
Popn_all %>% filter(Country == "Portugal") %>%
gather(key = "Sex", value = "Popn", -PropF, -PropM)
Popn_all %>% filter(Country == "Portugal") %>%
gather(key = "Sex", value = "Popn", -PropF, -PropM, -Country)
Popn_all %>% filter(Country == "Portugal") %>%
gather(key = "Sex", value = "Popn", -PopnF, -PopnM,)
Popn_all %>% filter(Country == "Portugal") %>%
gather(key = "Sex", value = "Popn", -PopnF, -PopnM)
xxx <- Popn_all %>% filter(Country == "Portugal") %>%
gather(key = "Sex", value = "Popn", -PopnF, -PopnM)
View(xxx)
gather(key = "Sex", value = "Popn", PropF, PropM)
# Solution given
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM = 1 -PropF  ) %>%
arrange(PropF, Country, Year)
# Printing the first 10 observations.
Popn_all %>%  head(10) %>%  print
gather(key = "Sex", value = "Popn", PropF, PropM)
xxx <- Popn_all %>% filter(Country == "Portugal") %>%
select(-PopnF, -PopnM)  %>%
gather(key = "Sex", value = "Popn", PropF, PropM)
View(xxx)
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PropF)) + geom_line()
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PropF)) + geom_line() +
labs(title = "Portuguese Population") +
ylab(Proportion - Females") +
scale_y_continuous(limits = c(0, 1))
Popn_all %>% filter(Country == "Portugal") %>%
Popn_all %>% filter(Country == "Portugal")
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PropF)) + geom_line()
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PropF)) + geom_line() +
labs(title = "Portuguese Population")
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PropF)) + geom_line() +
labs(title = "Portuguese Population") +
ylab("Proportion - Females")
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PropF)) + geom_line() +
labs(title = "Portuguese Population") +
ylab("Proportion - Females") +
scale_y_continuous(limits = c(0, 1))
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PropF)) + geom_line() +
labs(title = "Portuguese Population") +
ylab("Number - Females")
Popn_all %>% filter(Country == "Portugal") %>%
ggplot(aes(Year , PopnF)) + geom_line() +
labs(title = "Portuguese Population") +
ylab("Number - Females")
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
# Loading the tidyverse packages
library(tidyverse)
# We also need package stringr later
library(stringr)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
View(Wpopn)
PopnMF_eg <- read_rds("popnMF_eg.rds")
glimpse(PopnMF_eg)
View(PopnMF_eg)
PopnMF_eg <- read_rds("popnMF_eg.rds")
glimpse(PopnMF_eg)
View(PopnMF_eg)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = Female) %>%
rename(PopnM = Male) %>%
arrange(Country, Year)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
PopnMF_eg <- read_rds("popnMF_eg.rds")
glimpse(PopnMF_eg)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, 1,1)) %>%
mutate(Year = as.numeric(str_sub(SexYear, start=2, end=5))) %>%
select(-SexYear)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = parse_character(SexYear)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
rename(PopnF = Female) %>%
rename(PopnM = Male) %>%
arrange(Country, Year)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = parse_character(SexYear)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
arrange(Country, Year)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = parse_character(SexYear)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, start = 1, end = 5)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
arrange(Country, Year)
knitr::opts_chunk$set(echo = TRUE,
dev = "png",
fig.ext = ".png")
# library(wbstats)
# To see the orginal male and female data use:
# popF <- wb(indicator = "SP.POP.TOTL.FE.IN")
# popM <- wb(indicator = "SP.POP.TOTL.MA.IN")
# Loading the tidyverse packages
library(tidyverse)
# We also need package stringr later
library(stringr)
# Loading the tidyverse packages
library(tidyverse)
# We also need package stringr later
library(stringr)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
PopnMF_eg <- read_rds("popnMF_eg.rds")
glimpse(PopnMF_eg)
View(PopnMF_eg)
View(Wpopn)
# Loading the tidyverse packages
library(tidyverse)
# We also need package stringr later
library(stringr)
# Loading the tidyverse packages
library(tidyverse)
# We also need package stringr later
library(stringr)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, start = 1, end = 5)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
filter(!is.na(PopnF) & !is.na(PopnM)) %>%
arrange(Country, Year)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, start = 1, end = 5)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
filter(!is.na(PopnF) & !is.na(PopnM)) %>%
arrange(Country, Year)
# Solution given
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# Fill in the `mutate` to calclute the proportion for men.
# We add it now as it will be used for Question 2 below.
mutate(PropM = 1- PropF  ) %>%
arrange(PropF, Country, Year)
# Printing the first 10 observations.
Popn_all %>%  head(10) %>%  print
View(Popn_all)
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# We add it now as it will be used for Question 2 below.
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM =  1- PropF) %>%
arrange(PropF, Country, Year)
View(Popn_all)
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# We add it now as it will be used for Question 2 below.
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM =  1- PropF) %>%
arrange(PropF, Country, Year)
View(Popn_all)
PopnPT <- Popn_all %>%
#--# To do: Select only the Portuguese data.
filter(Country=="Portugal"   )
PopnPT %>% ggplot(aes(Year , PropF)) +
geom_line() +
labs(title = "Portuguese Population") +
ylab("Proportion - Females") +
scale_y_continuous(limits = c(0, 1))
View(PopnPT)
WpopCSV <- "World_Popn_MF.csv"
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
knitr::opts_chunk$set(echo = TRUE,
dev = "png",
fig.ext = ".png")
# Loading the tidyverse packages
library(tidyverse)
# We also need package stringr later
library(stringr)
# The World pop
WpopCSV <- "World_Popn_MF.csv"
Wpopn <- read_csv(WpopCSV)
PopnMF_eg <- read_rds("popnMF_eg.rds")
glimpse(PopnMF_eg)
View(PopnMF_eg)
PopnMF <- Wpopn %>%
gather(key = "SexYear", value = "Popn", -Country ) %>%
mutate(Sex = str_sub(SexYear, start = 1, end = 5)) %>%
mutate(Year = parse_number(SexYear)) %>%
select(-SexYear) %>%
spread(key = Sex, value = Popn) %>%
filter(!is.na(PopnF) & !is.na(PopnM)) %>%
arrange(Country, Year)
View(PopnMF)
Popn_all <- PopnMF %>%
mutate(PropF = PopnF / (PopnF + PopnM)) %>%
#--# We add it now as it will be used for Question 2 below.
#--# Fill in the `mutate` to calclute the proportion for men.
mutate(PropM =  1- PropF) %>%
arrange(PropF, Country, Year)
PopnPT <- Popn_all %>%
#--# To do: Select only the Portuguese data.
filter(Country=="Portugal"   )
# Proportion of females over time.
PopnPT %>% ggplot(aes(Year , PropF)) +
geom_line() +
labs(title = "Portuguese Population") +
ylab("Proportion - Females") +
scale_y_continuous(limits = c(0, 1))
# Number of females over time.
PopnPT %>% ggplot(aes(Year , PopnF)) +
geom_line() +
labs(title = "Portuguese Population") +
ylab("Number - Females")
View(PopnPT)
